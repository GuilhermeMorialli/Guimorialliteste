jQuery((function(){"use strict";var e=jQuery('.daftplugPublic[data-daftplug-plugin="daftplug_instantify"]'),t=e.attr("data-daftplug-plugin"),n=window[t+"_public_js_vars"],a=new UAParser,s=e.find(".daftplugPublicNavigationTabBar"),i=e.find(".daftplugPublicPushButton"),l=e.find(".daftplugPublicScrollProgressBar_fill"),o=e.find(".daftplugPublicWebShareButton"),r=e.find(".daftplugPublicIdleReloadButton"),u=String(a.getDevice().type).includes("mobile")&&!String(a.getDevice().type).includes("tablet"),c=String(a.getDevice().type).includes("tablet")&&!String(a.getDevice().type).includes("mobile"),f=!String(a.getDevice().type).includes("tablet")&&!String(a.getDevice().type).includes("mobile"),d=String(a.getBrowser().name).includes("Chrome"),g=String(a.getBrowser().name).includes("Edge"),p=String(a.getOS().name).includes("Android")&&d,w=String(a.getOS().name).includes("Android")&&g,y=String(a.getOS().name).includes("Android")&&String(a.getBrowser().name).includes("Firefox"),v=String(a.getOS().name).includes("Android")&&String(a.getBrowser().name).includes("Opera"),O=String(a.getOS().name).includes("iOS")&&String(a.getBrowser().name).includes("Safari"),h=H("firstVisit"),b=H("fullscreenOverlay"),m=H("headerOverlay"),P=H("snackbarOverlay"),k=H("postOverlay"),S=H("iosOverlay"),I=H("menuOverlay"),B=H("feedOverlay"),_=H("checkoutOverlay"),x=H("couponOverlay"),D=e.find(".daftplugPublicFullscreenOverlay"),T=D.filter(".-chrome"),j=D.filter(".-firefox"),A=D.filter(".-opera"),C=D.filter(".-safari"),Q=e.find(".daftplugPublicHeaderOverlay"),F=e.find(".daftplugPublicSnackbarOverlay"),L=e.find(".daftplugPublicPostOverlay"),E=e.find(".daftplugPublicIosOverlay"),N=e.find(".daftplugPublicMenuOverlay"),M=e.find(".daftplugPublicFeedOverlay"),W=e.find(".daftplugPublicCheckoutOverlay"),V=e.find(".daftplugPublicCouponOverlay"),q=e.find(".daftplugPublicInstallButton");e.find(".daftplugPublicRotateNotice");function $(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1}function U(){return["fullscreen","standalone","minimal-ui"].some((e=>window.matchMedia("(display-mode: "+e+")").matches))}function z(e,t,n){var a="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),a="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/"}function H(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var s=n[a];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}if("on"==n.settings.pwaOfflineForms&&Array.from(document.querySelectorAll("form")).forEach((e=>{new OfflineForm(e)})),"on"==n.settings.pwaNavigationTabBar&&(n.settings.pwaNavigationTabBarPlatforms.includes("mobile")&&u||n.settings.pwaNavigationTabBarPlatforms.includes("tablet")&&c||n.settings.pwaNavigationTabBarPlatforms.includes("pwa")&&U())&&(0==s.find("li").length?s.hide():(s.is(":visible")&&(jQuery("body").css("padding-bottom","60px"),setInterval((function(e){jQuery("#daftplugPublicToastMessage").css("bottom","85px")}),10),"on"==n.settings.pwaPushButton&&n.settings.pwaPushButtonPosition.indexOf("bottom")>=0&&i.length&&i.css("bottom","75px"),"on"==n.settings.pwaWebShareButton&&n.settings.pwaWebShareButtonPosition.indexOf("bottom")>=0&&o.length&&o.css("bottom","75px"),"on"==n.settings.pwaDarkMode&&jQuery(".darkmode-toggle, .darkmode-layer").length&&jQuery(".darkmode-toggle, .darkmode-layer").css("bottom","150px")),s.find(".daftplugPublicNavigationTabBar_item.-directSearch").find(".daftplugPublicNavigationTabBar_link").on("click",(function(e){e.preventDefault();var t=jQuery(this).prev(),n=t.find(".daftplugPublicNavigationTabBar_searchForm"),a=n.find(".daftplugPublicNavigationTabBar_searchField");t.fadeIn("fast",(function(e){a.trigger("focus").blur((function(e){n[0].reset(),t.fadeOut("fast")}))}))})))),"on"==n.settings.pwaScrollProgressBar&&(n.settings.pwaScrollProgressBarPlatforms.includes("desktop")&&f||n.settings.pwaScrollProgressBarPlatforms.includes("mobile")&&u||n.settings.pwaScrollProgressBarPlatforms.includes("tablet")&&c||n.settings.pwaScrollProgressBarPlatforms.includes("pwa")&&U())&&jQuery(document).on("scroll",(function(){var e=100*jQuery(document).scrollTop()/(jQuery(document).height()-jQuery(window).height());l.css("width",e+"%")})),"on"==n.settings.pwaDarkMode&&(n.settings.pwaDarkModePlatforms.includes("desktop")&&f||n.settings.pwaDarkModePlatforms.includes("mobile")&&u||n.settings.pwaDarkModePlatforms.includes("tablet")&&c||n.settings.pwaDarkModePlatforms.includes("pwa")&&U())){if("bottom-right"==n.settings.pwaDarkModeSwitchButtonPosition)var R="25px",J="unset";else R="unset",J="25px";var G="on"==n.settings.pwaDarkModeOSAware,K=new Darkmode({bottom:"100px",right:R,left:J,time:"0.3s",mixColor:"#fff",backgroundColor:"#fff",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"ðŸŒ“",autoMatchOsTheme:G});K.showWidget(),"on"==n.settings.pwaDarkModeBatteryLow&&!K.isActivated()&&"getBattery"in navigator&&navigator.getBattery().then((function(e){e.level<.1&&K.toggle()}))}if("on"==n.settings.pwaWebShareButton&&navigator.share&&(n.settings.pwaWebShareButtonPlatforms.includes("mobile")&&u||n.settings.pwaWebShareButtonPlatforms.includes("tablet")&&c||n.settings.pwaWebShareButtonPlatforms.includes("pwa")&&U())&&o.css("display","flex").on("click",(function(e){navigator.share({title:document.title,url:document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").href:document.location.href}).catch(console.error)})),"on"==n.settings.pwaPullDownNavigation&&(n.settings.pwaPullDownNavigationPlatforms.includes("mobile")&&u||n.settings.pwaPullDownNavigationPlatforms.includes("tablet")&&c||n.settings.pwaPullDownNavigationPlatforms.includes("pwa")&&U())&&(jQuery(document.body).css("overscroll-behavior-y","contain"),setTimeout((function(e){pullDownNavigation(),jQuery(".daftplugPublicPullDownNavigation").css("background",n.settings.pwaPullDownNavigationBgColor)}),1e3)),"on"==n.settings.pwaSwipeNavigation&&(n.settings.pwaSwipeNavigationPlatforms.includes("mobile")&&u||n.settings.pwaSwipeNavigationPlatforms.includes("tablet")&&c||n.settings.pwaSwipeNavigationPlatforms.includes("pwa")&&U())&&jQuery("body").attr("data-xthreshold","111").swipeleft((function(){window.history.back(),jQuery.toast({title:n.settings.pwaSwipeBackMsg,duration:3e3,position:"bottom"})})).swiperight((function(){window.history.forward(),jQuery.toast({title:n.settings.pwaSwipeForwardMsg,duration:3e3,position:"bottom"})})),"on"==n.settings.pwaShakeToRefresh&&(n.settings.pwaShakeToRefreshPlatforms.includes("mobile")&&u||n.settings.pwaShakeToRefreshPlatforms.includes("tablet")&&c||n.settings.pwaShakeToRefreshPlatforms.includes("pwa")&&U())&&(new Shake({threshold:15}).start(),window.addEventListener("shake",(function(){location.reload()}),!1)),"on"==n.settings.pwaInactiveBlur&&(n.settings.pwaInactiveBlurPlatforms.includes("mobile")&&u||n.settings.pwaInactiveBlurPlatforms.includes("tablet")&&c||n.settings.pwaInactiveBlurPlatforms.includes("pwa")&&U())&&jQuery(window).on("visibilitychange pageshow pagehide focus blur resume freeze",(function(e){document.hidden||!document.hasFocus()||"pagehide"==e.type||"blur"==e.type||"freeze"==e.type?jQuery("html").css({filter:"blur(3px)","-webkit-filter":"blur(3px)","-moz-filter":"blur(3px)","-o-filter":"blur(3px)","-ms-filter":"blur(3px)"}):jQuery("html").css({filter:"initial","-webkit-filter":"initial","-moz-filter":"initial","-o-filter":"initial","-ms-filter":"initial"})})),"on"==n.settings.pwaPreloader&&(n.settings.pwaPreloaderPlatforms.includes("desktop")&&f||n.settings.pwaPreloaderPlatforms.includes("mobile")&&u||n.settings.pwaPreloaderPlatforms.includes("tablet")&&c||n.settings.pwaPreloaderPlatforms.includes("pwa")&&U())){var X=window.performance.timing,Y=-(X.loadEventEnd-X.navigationStart),Z=100*parseInt(Y/1e3%60),ee=0,te=Math.abs(Math.floor(Z/70));switch(n.settings.pwaPreloaderStyle){case"percent":jQuery(window).on("beforeunload pronto.request",(function(e){e.returnValue="",jQuery(".daftplugPublicPreloader").css("display","flex").hide().fadeIn(200)}));var ne=jQuery(".daftplugPublicPreloader_fill"),ae=jQuery(".daftplugPublicPreloader_counter"),se=setInterval((function(){if(ee<70&&(ee+=1),ne.css({"transition-duration":"0.001s",width:ee+"%"}),ae.text(ee+"%"),70==ee&&X.loadEventEnd>0||X.loadEventEnd>0){var e=setInterval((function(){ee+=1,ne.css("width",ee+"%"),ae.text(ee+"%"),100==ee&&(setTimeout((function(){jQuery(".daftplugPublicPreloader").fadeOut(500,(function(e){ne.css("width","0"),ae.text("0%")}))}),300),clearInterval(e))}),1);clearInterval(se)}}),te);break;case"skeleton":jQuery(window).on("beforeunload pronto.request",(function(e){e.returnValue="",jQuery(".daftplugPublicPreloader").css("display","flex").hide().fadeIn(200)}));se=setInterval((function(){if(ee<70&&(ee+=1),jQuery(".daftplugPublicPreloader").hide(),jQuery("a, svg, i, input, select, button, video").not(".daftplugPublicPullDownNavigation_icon").addClass("-daftplugPublicSkeletonLoad"),jQuery("img:visible:not(.rev-slidebg), audio:visible, video:visible, iframe:visible").each((function(e){jQuery(this).wrap(`<div class="${jQuery(this).attr("class")} -daftplugPublicSkeletonLoad -media" style="width: ${jQuery(this).width()}px; height: ${jQuery(this).height()}px;"></div>`).hide()})),jQuery("*:visible").filter((function(){return this.currentStyle?"none"!==this.currentStyle.backgroundImage:window.getComputedStyle?"none"!==document.defaultView.getComputedStyle(this,null).getPropertyValue("background-image"):void 0})).not(".daftplugPublicPullDownNavigation_icon").addClass("-daftplugPublicSkeletonLoad"),jQuery("*:visible").filter((function(){return 0==jQuery(this).children().length&&jQuery(this).text().trim().length>0})).not(".daftplugPublicPullDownNavigation_icon").addClass("-daftplugPublicSkeletonLoad"),jQuery("*").not("iframe, .-daftplugPublicSkeletonLoad").contents().each((function(){3==this.nodeType&&""!=this.nodeValue.trim()&&jQuery(this).wrap('<ins class="-daftplugPublicSkeletonLoad"/>')})),70==ee&&X.loadEventEnd>0||X.loadEventEnd>0){var e=setInterval((function(){100==(ee+=1)&&(jQuery(".-daftplugPublicSkeletonLoad.-media").contents().unwrap().show(),jQuery('ins[class="-daftplugPublicSkeletonLoad"]').contents().unwrap(),jQuery("*").removeClass("-daftplugPublicSkeletonLoad"),jQuery("#daftplugPublicSkeletonLoadCss").remove(),clearInterval(e))}),1);clearInterval(se)}}),te);break;case"fade":jQuery(window).on("beforeunload pronto.request",(function(e){e.returnValue="",jQuery(document.body).removeClass("-daftplugPublicFadeIn").addClass("-daftplugPublicFadeOut")}));se=setInterval((function(){if(ee<70&&(ee+=1),70==ee&&X.loadEventEnd>0||X.loadEventEnd>0){var e=setInterval((function(){100==(ee+=1)&&(jQuery(document.body).removeClass("-daftplugPublicFadeOut").addClass("-daftplugPublicFadeIn"),clearInterval(e))}),1);clearInterval(se)}}),te);break;default:jQuery(window).on("beforeunload pronto.request",(function(e){e.returnValue="",jQuery(".daftplugPublicPreloader").css("display","flex").hide().fadeIn(200)}));se=setInterval((function(){if(ee<70&&(ee+=1),70==ee&&X.loadEventEnd>0||X.loadEventEnd>0){var e=setInterval((function(){100==(ee+=1)&&(setTimeout((function(){jQuery(".daftplugPublicPreloader").fadeOut(500)}),300),clearInterval(e))}),1);clearInterval(se)}}),te)}}if("on"==n.settings.pwaAjaxify&&(n.settings.pwaAjaxifyPlatforms.includes("desktop")&&f||n.settings.pwaAjaxifyPlatforms.includes("mobile")&&u||n.settings.pwaAjaxifyPlatforms.includes("tablet")&&c||n.settings.pwaAjaxifyPlatforms.includes("pwa")&&U())){var ie=""==n.settings.pwaAjaxifySelectors?"a:not(.no-ajaxy)":"a:not(.no-ajaxy),"+n.settings.pwaAjaxifySelectors,le="on"==n.settings.pwaAjaxifyForms&&"form:not(.no-ajaxy)";new Ajaxify({selector:ie,forms:le,refresh:!0,inlineskip:"daftplug-instantify",alwayshints:"daftplug-instantify"})}if("on"==n.settings.pwaAdaptiveLoading&&n.ampUrl&&(n.settings.pwaAdaptiveLoadingPlatforms.includes("desktop")&&f||n.settings.pwaAdaptiveLoadingPlatforms.includes("mobile")&&u||n.settings.pwaAdaptiveLoadingPlatforms.includes("tablet")&&c||n.settings.pwaAdaptiveLoadingPlatforms.includes("pwa")&&U())){var oe=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection;oe&&("4g"!==oe.effectiveType||oe.saveData)&&(window.location=n.ampUrl)}if("on"==n.settings.pwaPeriodicBackgroundSync&&"serviceWorker"in navigator&&async function(){const e=await navigator.serviceWorker.ready;if("periodicSync"in e){if("granted"===(await navigator.permissions.query({name:"periodic-background-sync"})).state)try{await e.periodicSync.register("periodicSync",{minInterval:864e5}),console.log("Periodic background sync registered!")}catch(e){console.error(`Periodic background sync failed:\n${e}`)}}}(),"on"==n.settings.pwaContentIndexing&&"serviceWorker"in navigator&&async function(){const e=await navigator.serviceWorker.ready;"index"in e&&caches.keys().then((t=>Promise.all(t.map((t=>{t.endsWith("-html")&&caches.open(t).then((t=>{t.keys().then((t=>Promise.all(t.map((t=>{window.location.href==t.url&&e.index.add({id:window.location.href,url:window.location.href,title:document.title,description:jQuery('meta[name="description"]').prop("content"),icons:[{src:n.iconUrl.replace(/(\.[\w\d_-]+)$/i,"-150x150$1"),sizes:"150x150",type:"image/png"}]})})))))}))})))))}(),"on"==n.settings.pwaPersistentStorage&&navigator.storage&&navigator.storage.persist&&async function(){await navigator.storage.persisted()||await navigator.storage.persist()}(),"on"==n.settings.pwaVibration&&(n.settings.pwaVibrationPlatforms.includes("mobile")&&u||n.settings.pwaVibrationPlatforms.includes("tablet")&&c||n.settings.pwaVibrationPlatforms.includes("pwa")&&U())&&jQuery("body").vibrate(),"on"==n.settings.pwaIdleDetection&&(n.settings.pwaIdleDetectionPlatforms.includes("desktop")&&f||n.settings.pwaIdleDetectionPlatforms.includes("mobile")&&u||n.settings.pwaIdleDetectionPlatforms.includes("tablet")&&c||n.settings.pwaIdleDetectionPlatforms.includes("pwa")&&U())&&"IdleDetector"in window){async function be(){if("granted"!==await IdleDetector.requestPermission())return console.log("Idle detection permission not granted.")}document.addEventListener("click",be),async function(){try{const e=(new AbortController).signal,t=new IdleDetector;t.addEventListener("change",(()=>{const e=t.userState,n=t.screenState;console.log(`Idle change: ${e}, ${n}.`),"idle"==e?r.addClass("-active"):r.removeClass("-active")})),t.start({threshold:6e4*n.settings.pwaIdleDetectionThreshold,signal:e})}catch(e){console.error(e.name,e.message)}}(),r.on("click",(function(e){location.reload()}))}if("on"==n.settings.pwaScreenWakeLock&&(n.settings.pwaScreenWakeLockPlatforms.includes("mobile")&&u||n.settings.pwaScreenWakeLockPlatforms.includes("tablet")&&c||n.settings.pwaScreenWakeLockPlatforms.includes("pwa")&&U())&&"wakeLock"in navigator){var re=null,ue=async function(){re=await navigator.wakeLock.request("screen")},ce=function(){null!==re&&"visible"===document.visibilityState&&ue()};ue(),document.addEventListener("visibilitychange",ce),document.addEventListener("fullscreenchange",ce)}if("on"==n.settings.pwaOverlays&&(u||c)&&!U()&&!$())if("on"==n.settings.pwaOverlaysSkip&&null==h)z("firstVisit","done",9999),sessionStorage.setItem("firstVisit","true");else if(!sessionStorage.getItem("firstVisit")){if("on"==n.settings.pwaOverlaysTypeFullscreen&&null==b&&D.length){if((n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w)&&T.length){var fe=!1,de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,fe||setTimeout((function(){T.fadeIn("fast",(function(e){fe=!0,T.on("click",".daftplugPublicFullscreenOverlay_button",(function(e){T.fadeOut("fast",(function(e){z("fullscreenOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))}))}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){j.fadeIn("fast")}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){A.fadeIn("fast")}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){C.fadeIn("fast")}),1e3*n.settings.pwaOverlaysDelay);D.on("click",".daftplugPublicFullscreenOverlay_close",(function(e){D.fadeOut("fast",(function(e){z("fullscreenOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}if("on"==n.settings.pwaOverlaysTypeHeader&&null==m&&Q.length){if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w){var ge=!1;de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,ge||setTimeout((function(){Q.css("display","flex").hide().fadeIn("fast",(function(e){ge=!0,Q.on("click",".daftplugPublicHeaderOverlay_button",(function(e){Q.fadeOut("fast",(function(e){z("headerOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))}))}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){Q.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicHeaderOverlay_button",(function(e){Q.fadeOut("fast",(function(e){z("headerOverlay","shown",n.settings.pwaOverlaysShowAgain),j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){Q.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicHeaderOverlay_button",(function(e){Q.fadeOut("fast",(function(e){z("headerOverlay","shown",n.settings.pwaOverlaysShowAgain),A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){Q.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicHeaderOverlay_button",(function(e){Q.fadeOut("fast",(function(e){z("headerOverlay","shown",n.settings.pwaOverlaysShowAgain),C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay);Q.on("click",".daftplugPublicHeaderOverlay_dismiss",(function(e){Q.fadeOut("fast",(function(e){z("headerOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}if("on"==n.settings.pwaOverlaysTypeSnackbar&&null==P&&F.length)if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w){var pe=!1;de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,pe||setTimeout((function(){F.css("display","flex").hide().fadeIn("fast",(function(e){pe=!0,F.on("click",".daftplugPublicSnackbarOverlay_button",(function(e){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))})),setTimeout((function(){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}),8e3)}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){F.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicSnackbarOverlay_button",(function(e){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain),j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))})),setTimeout((function(){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}),8e3)}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){F.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicSnackbarOverlay_button",(function(e){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain),A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))})),setTimeout((function(){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}),8e3)}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){F.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicSnackbarOverlay_button",(function(e){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain),C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))})),setTimeout((function(){F.fadeOut("fast",(function(e){z("snackbarOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}),8e3)}),1e3*n.settings.pwaOverlaysDelay);if("on"==n.settings.pwaOverlaysTypePost&&null==k&&L.length){if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w){var we=!1;de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,setTimeout((function(){we||L.fadeIn("fast",(function(e){we=!0,L.on("click",".daftplugPublicPostOverlayAction_button.-install",(function(e){L.fadeOut("fast",(function(e){z("postOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))}))}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){L.fadeIn("fast").on("click",".daftplugPublicPostOverlayAction_button.-install",(function(e){L.fadeOut("fast",(function(e){z("postOverlay","shown",n.settings.pwaOverlaysShowAgain),j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){L.fadeIn("fast").on("click",".daftplugPublicPostOverlayAction_button.-install",(function(e){L.fadeOut("fast",(function(e){z("postOverlay","shown",n.settings.pwaOverlaysShowAgain),A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){L.fadeIn("fast").on("click",".daftplugPublicPostOverlayAction_button.-install",(function(e){L.fadeOut("fast",(function(e){z("postOverlay","shown",n.settings.pwaOverlaysShowAgain),C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay);L.on("click",".daftplugPublicPostOverlayAction_button.-dismiss",(function(e){L.fadeOut("fast",(function(e){z("postOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}if("on"==n.settings.pwaOverlaysTypeIos&&null==S&&E.length&&n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&setTimeout((function(){E.fadeIn("fast").on("click",".daftplugPublicIosOverlay_close",(function(e){E.fadeOut("fast",(function(e){z("iosOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}),1e3*n.settings.pwaOverlaysDelay),"on"==n.settings.pwaOverlaysTypeMenu&&null==I&&N.length){if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w){var ye=!1;de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,setTimeout((function(){ye||N.css("display","flex").hide().fadeIn("fast",(function(e){ye=!0,N.on("click",".daftplugPublicMenuOverlay_install",(function(e){N.fadeOut("fast",(function(e){z("menuOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))}))}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){N.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicMenuOverlay_install",(function(e){N.fadeOut("fast",(function(e){z("menuOverlay","shown",n.settings.pwaOverlaysShowAgain),j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){N.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicMenuOverlay_install",(function(e){N.fadeOut("fast",(function(e){z("menuOverlay","shown",n.settings.pwaOverlaysShowAgain),A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){N.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicMenuOverlay_install",(function(e){N.fadeOut("fast",(function(e){z("menuOverlay","shown",n.settings.pwaOverlaysShowAgain),C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay);N.on("click",".daftplugPublicMenuOverlay_dismiss",(function(e){N.fadeOut("fast",(function(e){z("menuOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}if("on"==n.settings.pwaOverlaysTypeFeed&&null==B&&M.length){if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w){var ve=!1;de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,setTimeout((function(){ve||M.css("display","flex").hide().fadeIn("fast",(function(e){ve=!0,M.on("click",".daftplugPublicFeedOverlay_install",(function(e){M.fadeOut("fast",(function(e){z("feedOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))}))}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){M.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicFeedOverlay_install",(function(e){M.fadeOut("fast",(function(e){z("feedOverlay","shown",n.settings.pwaOverlaysShowAgain),j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){M.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicFeedOverlay_install",(function(e){M.fadeOut("fast",(function(e){z("feedOverlay","shown",n.settings.pwaOverlaysShowAgain),A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){M.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicFeedOverlay_install",(function(e){M.fadeOut("fast",(function(e){z("feedOverlay","shown",n.settings.pwaOverlaysShowAgain),C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay);M.on("click",".daftplugPublicFeedOverlay_dismiss",(function(e){M.fadeOut("fast",(function(e){z("feedOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}if("on"==n.settings.pwaOverlaysTypeCheckout&&null==_&&W.length){if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w){var Oe=!1;de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,setTimeout((function(){Oe||W.css("display","flex").hide().fadeIn("fast",(function(e){Oe=!0,W.on("click",".daftplugPublicCheckoutOverlay_install",(function(e){W.fadeOut("fast",(function(e){z("checkoutOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))}))}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){W.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicCheckoutOverlay_install",(function(e){W.fadeOut("fast",(function(e){z("checkoutOverlay","shown",n.settings.pwaOverlaysShowAgain),j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){W.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicCheckoutOverlay_install",(function(e){W.fadeOut("fast",(function(e){z("checkoutOverlay","shown",n.settings.pwaOverlaysShowAgain),A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){W.css("display","flex").hide().fadeIn("fast").on("click",".daftplugPublicCheckoutOverlay_install",(function(e){W.fadeOut("fast",(function(e){z("checkoutOverlay","shown",n.settings.pwaOverlaysShowAgain),C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay);W.on("click",".daftplugPublicCheckoutOverlay_dismiss",(function(e){W.fadeOut("fast",(function(e){z("checkoutOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}if("on"==n.settings.pwaOverlaysTypeCoupon&&null==x&&V.length){if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&p||n.settings.pwaOverlaysBrowsers.includes("edge")&&w){var he=!1;de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,setTimeout((function(){he||V.fadeIn("fast",(function(e){he=!0,V.on("click",".daftplugPublicCouponOverlay_button.-install",(function(e){V.fadeOut("fast",(function(e){z("couponOverlay","shown",n.settings.pwaOverlaysShowAgain),de.prompt(),de=null}))}))}))}),1e3*n.settings.pwaOverlaysDelay)}))}else n.settings.pwaOverlaysBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){V.fadeIn("fast").on("click",".daftplugPublicCouponOverlay_button.-install",(function(e){V.fadeOut("fast",(function(e){z("couponOverlay","shown",n.settings.pwaOverlaysShowAgain),j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){V.fadeIn("fast").on("click",".daftplugPublicCouponOverlay_button.-install",(function(e){V.fadeOut("fast",(function(e){z("couponOverlay","shown",n.settings.pwaOverlaysShowAgain),A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay):n.settings.pwaOverlaysBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){V.fadeIn("fast").on("click",".daftplugPublicCouponOverlay_button.-install",(function(e){V.fadeOut("fast",(function(e){z("couponOverlay","shown",n.settings.pwaOverlaysShowAgain),C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))}))}),1e3*n.settings.pwaOverlaysDelay);V.on("click",".daftplugPublicCouponOverlay_close, .daftplugPublicCouponOverlay_background",(function(e){V.fadeOut("fast",(function(e){z("couponOverlay","shown",n.settings.pwaOverlaysShowAgain)}))}))}}if("on"==n.settings.pwaInstallButton&&!U()&&!$()&&q.length)if(n.settings.pwaOverlaysBrowsers.includes("chrome")&&d||n.settings.pwaOverlaysBrowsers.includes("edge")&&g){de=void 0;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),de=e,setTimeout((function(){q.css("display","inline-block").on("click",(function(e){de.prompt(),de=null}))}),1e3)}))}else n.settings.pwaInstallButtonBrowsers.includes("firefox")&&y&&j.length?setTimeout((function(){q.css("display","inline-block").on("click",(function(e){j.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){j.fadeOut("fast")}))}))}),1e3):n.settings.pwaInstallButtonBrowsers.includes("opera")&&v&&A.length?setTimeout((function(){q.css("display","inline-block").on("click",(function(e){A.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){A.fadeOut("fast")}))}))}),1e3):n.settings.pwaInstallButtonBrowsers.includes("safari")&&O&&C.length&&setTimeout((function(){q.css("display","inline-block").on("click",(function(e){C.fadeIn("fast").on("click",".daftplugPublicFullscreenOverlay_close",(function(e){C.fadeOut("fast")}))}))}),1e3);U()?(jQuery(document.body).addClass("isPwa"),"queryParameter"==n.settings.pwaDetectionMode?new URLSearchParams(window.location.search).has("isPwa")?jQuery(document).on("DOMNodeInserted",document.body,(function(e){jQuery('a[href*="'+window.location.hostname+'"], a[href^="/"], a[href^="."]').each((function(e){var t=jQuery(this),n=function(e,t,n,a){var s,i;e.indexOf("#")>0?(s=e.indexOf("#"),i=e.substring(e.indexOf("#"),e.length)):(i="",s=e.length);var l=e.substring(0,s).split("?"),o="";if(l.length>1&&""!=l[1])for(var r=l[1].split("&"),u=0;u<r.length;u++){var c=r[u].split("=");c[0]!=t&&(""==o?o="?":o+="&",o+=c[0]+"="+(c[1]?c[1]:""))}return""==o&&(o="?"),a?o="?"+t+"="+n+(o.length>1?"&"+o.substring(1):""):(""!==o&&"?"!=o&&(o+="&"),o+=t+"="+(n||"")),l[0]+o+i}(t.attr("href"),"isPwa","true");t.attr("href",n)}))})):window.location.search+="&isPwa=true":z("isPwa","true"),null===localStorage.getItem("installedPwa")&&(jQuery.ajax({url:n.ajaxUrl,dataType:"text",type:"POST",data:{action:t+"_save_installer_data",browser:a.getBrowser().name,device:a.getOS().name},beforeSend:function(){},success:function(e,t,n){localStorage.setItem("installedPwa","true")},complete:function(){},error:function(e,t,n){console.log(e)}}),(u||c)&&jQuery.ajax({url:n.ajaxUrl,dataType:"text",type:"POST",data:{action:t+"_display_coupon_reward"},beforeSend:function(){},success:function(t,n,a){(t=JSON.parse(t)).success&&(e.append(`\n                                <div class="daftplugPublicCouponOverlay -reward">\n                                    <div class="daftplugPublicCouponOverlay_background"></div>\n                                    <div class="daftplugPublicCouponOverlay_content">\n                                        <div class="daftplugPublicCouponOverlay_close"></div>\n                                        <img class="daftplugPublicCouponOverlay_icon" src="${t.data.iconUrl}"/>\n                                        <div class="daftplugPublicCouponOverlay_title">${t.data.title}</div>\n                                        <div class="daftplugPublicCouponOverlay_message">${t.data.message}</div>\n                                        <button class="daftplugPublicCouponOverlay_button" style="padding: 10px 20px; font-size: 20px;">${t.data.couponCode}</button>\n                                    </div>\n                                </div>\n                            `),jQuery(".daftplugPublicCouponOverlay.-reward .daftplugPublicCouponOverlay_button").on("click tap",(function(e){(async()=>{try{await navigator.clipboard.writeText(t.data.couponCode),jQuery(".daftplugPublicCouponOverlay.-reward").addClass("-copying").delay(500).queue((function(){jQuery(this).removeClass("-copying").dequeue()}))}catch(e){console.error("Failed to copy: ",e)}})()})),jQuery(".daftplugPublicCouponOverlay.-reward .daftplugPublicCouponOverlay_close, .daftplugPublicCouponOverlay.-reward .daftplugPublicCouponOverlay_background").on("click tap",(function(e){jQuery(".daftplugPublicCouponOverlay.-reward").fadeOut("fast")})))},complete:function(){},error:function(e,t,n){console.log(e)}}))):z("isPwa","",-1)}));